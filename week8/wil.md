# <초급 백엔드 스터디 8주차 WIL>  

## 참고할만한 사이트  
[강의록](https://github.com/jspark-hongik/jspark-hongik-2024_2_gdsc_backend_study/blob/main/week8/lectureNote5.pdf) 

## 키워드  
    - 스프링의 **서비스 계층**, **단위 테스트** 

### 1. 서비스 계층
    - 서비스  
        - 어플리케이션의 비즈니스 로직이 담기는 계층  
        - 레포지토리 계층과 소통하며 엔티티 또는 DTO로 소통함  
    - 서비스 계층  
        - 어플리케이션의 비즈니스 로직을 수행함 
          
        <비즈니스 로직 예시>  
        - 할 일을 생성한다  
        - 할 일을 수정한다  
        - 할 일은 그 일을 생성한 유저만 삭제 가능  
        - 할 일은 인당 최대 10개까지 생성 가능  
            1. 할 일을 생성하려는 유저를 조회(에러 상황 : 유저가 존재하지 않는다면?)  
            2. 해당 유저가 생성한 모든 할 일을 조회  
            3. 모든 할 일의 개수가 10개보다 적은 지 확인(정책에 맞지 않는 상황 : 10개 이상이라면?)  
            4. 10개보다 적다면, 할 일을 생성  
        
    <로직의 원자성>  
        1. A 데이터를 생성한다  
        2. B 데이터를 생성한다  
        3. A, B 데이터를 이용하여 C 데이터를 생성한다  
  
        - 위 세 로직은 셋 다 실행되거나, 셋 다 실행되지 않아야 한다  
        - 이 전체 로직은 더 이상 쪼갤 수 없는 **원자성을 가진 로직**이다  
  
    - 서비스 계층(이어서)
        - 서비스 계층의 하나의 메서드에는 원자성을 갖는 로직을 기술한다  
        - 로직의 원자성을 보장하기 위해서 서비스 계층에 메서드 단위로 트랜잭션을 적용해준다  
        - 트랜잭션 중간에 에러가 발생하면 변경 사항을 롤백한다  
        - 구현은 강의록 참고(과제)  

### 2. 서비스 테스트  
    - 구현한 로직이 잘 동작하는지 확인하기 위해 테스트 코드를 작성한다  
    - 서비스 테스트는 **단위 테스트**로 작성한다  
    - 단위 테스트는 스프링 부트와 다른 클래스에 의존하지 않고, 대상 **자바 클래스 하나만 단독으로 테스트하는 것**을 말한다  
    - 서비스 클래스를 단독으로 테스트하기 위해, 서비스가 의존하는 레포지토리는 **가짜 객체를 사용**한다  
    - 이 가짜 객체를 가리켜 **mock** 이라고 한다  
    - 실제 객체를 흉내내는 mock을 만드는 행위를 **mocking** 이라고 한다  
    - mocking을 쉽게 도와주는 Mockito 라이브러리를 사용해 단위 테스트를 작성하자  
    - 테스트 코드 작성 과정이나 결과는 강의록과 과제물 참고
